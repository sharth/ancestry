<details #container (toggle)="(true)">
  <summary>
    Shared With ({{ form.length }})
    <button
      type="button"
      class="btn btn-outline-primary bi-plus"
      (click)="appendSharedEvent()"
    ></button>
  </summary>
  @defer (when container.open) {
    @for (formGroup of form; track formGroup) {
      <details [open]="newControls.has(formGroup)">
        <summary>
          {{ formGroup.xref().value() }}
          <button
            type="button"
            class="btn btn-sm btn-outline-danger bi-trash"
            (click)="removeSharedEvent($index)"
          ></button>
        </summary>
        <app-input-individual-xref
          #focusTarget
          [field]="formGroup.xref"
          [ancestryDatabase]="ancestryDatabase()"
        ></app-input-individual-xref>
        <div class="form-floating">
          <input
            class="form-control"
            id="role_{{ $index }}"
            [field]="formGroup.role"
          />
          <label for="role_{{ $index }}">Role</label>
        </div>
      </details>
    }
  }
</details>
