<table>
  <tbody>
    @for (event of formArray.controls; track $index) {
      <tr>
        <td rowspan="4" class="align-top">
          <button
            type="button"
            class="btn btn-danger bi-trash"
            (click)="removeEvent($index)"
          ></button>
        </td>
        <td class="form-floating">
          <select
            class="form-control"
            id="tag_{{ $index }}"
            [formControl]="event.controls.tag"
          >
            @for (event of gedcomEventTags; track event.tag) {
              <option [ngValue]="event.tag">{{ event.description }}</option>
            }
          </select>
          <label for="tag_{{ $index }}">Tag</label>
        </td>
        <td class="form-floating">
          <input
            class="form-control"
            id="type_{{ $index }}"
            [formControl]="event.controls.type"
          />
          <label for="type_{{ $index }}">Type</label>
        </td>
        <td class="form-floating">
          <input
            class="form-control"
            id="address_{{ $index }}"
            [formControl]="event.controls.address"
          />
          <label for="address_{{ $index }}">Address</label>
        </td>
        <td class="form-floating">
          <input
            class="form-control"
            id="place_{{ $index }}"
            [formControl]="event.controls.place"
          />
          <label for="place_{{ $index }}">Place</label>
        </td>
        <td class="form-floating">
          <input
            class="form-control"
            id="cause_{{ $index }}"
            [formControl]="event.controls.cause"
          />
          <label for="cause_{{ $index }}">Cause</label>
        </td>
        <td class="form-floating">
          <input
            class="form-control"
            id="date_{{ $index }}"
            [formControl]="event.controls.date"
          />
          <label for="date_{{ $index }}">Date</label>
        </td>
        <td class="form-floating">
          <input
            class="form-control"
            id="sdate_{{ $index }}"
            [formControl]="event.controls.sortDate"
          />
          <label for="sdate_{{ $index }}">Sort Date</label>
        </td>
      </tr>
      <tr>
        <td colspan="7">
          <details>
            <summary>
              Citations ({{ event.controls.citations.value.length }})
            </summary>
            <app-input-citations
              [formControl]="event.controls.citations"
              [ancestryDatabase]="ancestryDatabase()"
            ></app-input-citations>
          </details>
        </td>
      </tr>
      <tr>
        <td colspan="7">
          <details>
            <summary>
              Shared With ({{ event.controls.sharedWith.value.length }})
            </summary>
            <app-input-shared-with
              [formControl]="event.controls.sharedWith"
              [ancestryDatabase]="ancestryDatabase()"
            ></app-input-shared-with>
          </details>
        </td>
      </tr>
      <tr>
        <td colspan="7">
          <details>
            <summary>Notes ({{ event.controls.notes.value.length }})</summary>
            <app-input-notes
              [formControl]="event.controls.notes"
              [ancestryDatabase]="ancestryDatabase()"
            ></app-input-notes>
          </details>
        </td>
      </tr>
    }
  </tbody>
  <tfoot>
    <tr>
      <th colspan="8">
        <button
          type="button"
          class="btn btn-outline-primary bi-plus"
          (click)="appendEvent()"
        ></button>
      </th>
    </tr>
  </tfoot>
</table>
