<details #container (toggle)="(true)" [open]="open()">
  <summary>Notes ({{ form.length }})</summary>
  @defer (when container.open) {
    <table>
      <tbody>
        @for (note of form; track note) {
          <tr>
            <td>
              <button
                type="button"
                class="btn btn-danger bi-trash"
                aria-label="Remove note"
                (click)="removeNote($index)"
              ></button>
            </td>
            <td class="form-floating">
              <textarea
                #focusTarget
                id="note_{{ $index }}"
                class="form-control"
                [formField]="note.text"
              ></textarea>
              <label for="note_{{ $index }}">Text</label>
            </td>
          </tr>
        }
      </tbody>
      <tfoot>
        <tr>
          <th>
            <button
              type="button"
              class="btn btn-outline-primary bi-plus"
              aria-label="Add note"
              (click)="appendNote()"
            ></button>
          </th>
          <th></th>
        </tr>
      </tfoot>
    </table>
  }
</details>
