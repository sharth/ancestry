@let columns =
  [
    "action",
    "tag",
    "type",
    "address",
    "place",
    "cause",
    "date",
    "value",
    "citations",
    "sharedWith",
  ];

<mat-table [dataSource]="events()">
  <ng-container matColumnDef="action">
    <mat-header-cell *matHeaderCellDef>Action</mat-header-cell>
    <mat-cell *matCellDef="let event">
      <button
        type="button"
        class="btn btn-danger bi-trash"
        (click)="removeEvent.emit(event)"
      ></button>
    </mat-cell>
    <mat-footer-cell *matFooterCellDef>
      <button
        type="button"
        class="btn btn-outline-primary bi-plus"
        (click)="addEvent.emit()"
      ></button>
    </mat-footer-cell>
  </ng-container>

  <ng-container matColumnDef="tag">
    <mat-header-cell *matHeaderCellDef>Tag</mat-header-cell>
    <mat-cell *matCellDef="let event">
      <input [(ngModel)]="event.tag" />
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="type">
    <mat-header-cell *matHeaderCellDef>Type</mat-header-cell>
    <mat-cell *matCellDef="let event">
      <input [(ngModel)]="event.type" />
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="address">
    <mat-header-cell *matHeaderCellDef>Address</mat-header-cell>
    <mat-cell *matCellDef="let event">
      <input [(ngModel)]="event.address" />
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="place">
    <mat-header-cell *matHeaderCellDef>Place</mat-header-cell>
    <mat-cell *matCellDef="let event">
      <input [(ngModel)]="event.place" />
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="cause">
    <mat-header-cell *matHeaderCellDef>Cause</mat-header-cell>
    <mat-cell *matCellDef="let event">
      <input [(ngModel)]="event.cause" />
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="date">
    <mat-header-cell *matHeaderCellDef>Date</mat-header-cell>
    <mat-cell *matCellDef="let event">
      <input [(ngModel)]="event.date" />
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="value">
    <mat-header-cell *matHeaderCellDef>Value</mat-header-cell>
    <mat-cell *matCellDef="let event">
      <input [(ngModel)]="event.value" />
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="citations">
    <mat-header-cell *matHeaderCellDef>Citations</mat-header-cell>
    <mat-cell *matCellDef="let event">
      @for (citation of event.citations; track $index) {
        {{ citation.sourceXref }}
      }
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="sharedWith">
    <mat-header-cell *matHeaderCellDef>Shared With</mat-header-cell>
    <mat-cell *matCellDef="let event">
      @for (sharedWith of event.sharedWith; track $index) {
        {{ sharedWith.xref }}
      }
    </mat-cell>
  </ng-container>

  <mat-header-row *matHeaderRowDef="columns" />
  <mat-row *matRowDef="let row; columns: columns" />
  <mat-footer-row *matFooterRowDef="['action']" />
</mat-table>
