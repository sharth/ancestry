<h1>
    <app-source-view-abbr [source]="source()"></app-source-view-abbr>
</h1>

<h2>Title</h2>
<app-source-view-title [source]="source()"></app-source-view-title>

<h2>Text</h2>
<app-source-view-text [source]="source()"></app-source-view-text>

@if (source().repositoryCitations.length > 0) {
<h2>Repositories</h2>
<app-source-view-repository-citations [source]="source()"></app-source-view-repository-citations>
}

@if (source().citations().length > 0) {
<h2>Citations</h2>
<app-source-view-event-citations [source]="source()"></app-source-view-event-citations>
}

@if (source().unknownRecords.length > 0) {
<h2>Unknown Records</h2>
<app-source-view-unknowns [source]="source()"></app-source-view-unknowns>
}

<h2>Gedcom</h2>
<pre>{{ gedcomRecord().text().join('\n') }}</pre>

<div class="position-fixed bottom-0 end-0 rounded-circle m-5">
    <button type="button" class="btn btn-primary btn-lg bi-pencil" (click)="openForm()"></button>
</div>

<dialog #editDialog>
    <form (ngSubmit)="submitForm()" class="vstack gap-3">
        <app-source-edit-abbr [(sourceModel)]="model!"></app-source-edit-abbr>
        <app-source-edit-title [sourceModel]="model!"></app-source-edit-title>
        <app-source-edit-text [(sourceModel)]="model!"></app-source-edit-text>
        <app-source-edit-repository-citations [(sourceModel)]="model!"></app-source-edit-repository-citations>
        <app-source-edit-unknowns [(sourceModel)]="model!"></app-source-edit-unknowns>
        <input type="submit">
        <input type="button" value="Cancel" (click)="editDialog.close()">

        <pre>{{ model | json }}</pre>
    </form>
</dialog>